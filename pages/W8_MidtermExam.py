# W8_MidtermExam.py
# æœŸä¸­è€ƒäº’å‹•é ï¼ˆç¬¬1â€“7é€±æ•´åˆï¼‰

import streamlit as st
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from scipy.stats import t

st.set_page_config(layout="wide")
st.title("ç¬¬ 8 é€±ï½œæœŸä¸­è€ƒäº’å‹•é ï¼ˆç¬¬1â€“7é€±æ•´åˆï¼‰")
st.caption("ğŸ“˜ è€ƒè©¦ç¯„åœï¼šæŠ½æ¨£åˆ†é…ã€ä¿¡è³´å€é–“ã€æè¿°çµ±è¨ˆã€æ©Ÿç‡ã€åˆ†å¸ƒ")

st.markdown("""
æœ¬é€±ç‚ºæœŸä¸­è€ƒï¼Œå­¸ç”Ÿéœ€æ•´åˆå‰ä¸ƒé€±çŸ¥è­˜ï¼š
- æè¿°çµ±è¨ˆèˆ‡è³‡æ–™æ¢ç´¢
- æ©Ÿç‡è¨ˆç®—èˆ‡åˆ†å¸ƒç†è§£
- æŠ½æ¨£åˆ†é…ã€ä¿¡è³´å€é–“
- æŸ¥ t è¡¨è¨ˆç®—ä¿¡è³´å€é–“
- å·¥ç¨‹åˆ¤æ–·èˆ‡æ±ºç­–
""")

# =================================================
# A. é¸æ“‡è€ƒé¡Œ
# =================================================
task = st.selectbox(
    "é¸æ“‡è€ƒé¡Œé¡å‹",
    ["æè¿°çµ±è¨ˆèˆ‡æ©Ÿç‡", "æŠ½æ¨£èˆ‡ä¿¡è³´å€é–“", "å·¥ç¨‹åˆ¤æ–·ç¶œåˆ"]
)

# =================================================
# B. æè¿°çµ±è¨ˆèˆ‡æ©Ÿç‡
# =================================================
if task == "æè¿°çµ±è¨ˆèˆ‡æ©Ÿç‡":
    st.subheader("ä¸€ã€æè¿°çµ±è¨ˆèˆ‡æ©Ÿç‡é¡Œ")
    data = np.random.normal(3.0,0.5,20)
    st.write("å·¥ç¨‹æ¨£æœ¬è³‡æ–™ï¼š", np.round(data,3))
    mean_val = st.number_input("è¼¸å…¥æ¨£æœ¬å¹³å‡", value=0.0)
    std_val = st.number_input("è¼¸å…¥æ¨£æœ¬æ¨™æº–å·®", value=0.0)
    st.write("è¨ˆç®—å¾Œç­”æ¡ˆå¯ä»¥ç”¨ç¨‹å¼é©—è­‰ï¼Œè€å¸«æ‰¹æ”¹æ™‚æ ¸å°å³å¯")

# =================================================
# C. æŠ½æ¨£èˆ‡ä¿¡è³´å€é–“
# =================================================
elif task == "æŠ½æ¨£èˆ‡ä¿¡è³´å€é–“":
    st.subheader("äºŒã€æŠ½æ¨£èˆ‡ä¿¡è³´å€é–“é¡Œ")
    n = st.number_input("æ¨£æœ¬æ•¸ n", 5,50,10)
    df = n-1
    xbar = st.number_input("æ¨£æœ¬å¹³å‡ xÌ„", 0.0)
    s = st.number_input("æ¨£æœ¬æ¨™æº–å·® s", 0.0)
    alpha = st.selectbox("é¡¯è‘—æ°´æº– Î±", [0.10,0.05,0.01], index=1)
    t_input = st.number_input("è«‹è¼¸å…¥ t æŸ¥è¡¨å€¼ tÎ±/2, df", value=2.0, step=0.01)
    lower = xbar - t_input*s/np.sqrt(n)
    upper = xbar + t_input*s/np.sqrt(n)
    st.write(f"ä¿¡è³´å€é–“ç‚º [{lower:.3f}, {upper:.3f}]")

# =================================================
# D. å·¥ç¨‹åˆ¤æ–·ç¶œåˆ
# =================================================
else:
    st.subheader("ä¸‰ã€å·¥ç¨‹åˆ¤æ–·ç¶œåˆé¡Œ")
    st.markdown("""
1. çµ¦å®šå¡åœ°ä½ç§»æˆ–é™é›¨é‡è³‡æ–™ï¼Œè¨ˆç®—æ¨£æœ¬å¹³å‡èˆ‡æ¨™æº–å·®  
2. æŸ¥ t è¡¨è¨ˆç®—ä¿¡è³´å€é–“  
3. åˆ¤æ–·å·¥ç¨‹å®‰å…¨èˆ‡é¢¨éšª  
4. æå‡ºç°¡çŸ­å·¥ç¨‹åˆ¤æ–·å»ºè­°  
""")
    st.info("ğŸ”¹ æœ¬é€±é‡é»ï¼šæ•´åˆå‰ä¸ƒé€±çµ±è¨ˆå·¥å…· â†’ å·¥ç¨‹åˆ¤æ–·")

